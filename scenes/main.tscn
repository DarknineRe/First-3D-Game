[gd_scene load_steps=19 format=3 uid="uid://dktf3rn1rctie"]

[ext_resource type="Script" uid="uid://ylgxra3hb0n1" path="res://scripts/main.gd" id="1_tefeu"]
[ext_resource type="PackedScene" uid="uid://dfifymtckmhgr" path="res://scenes/mob.tscn" id="2_o6xl0"]
[ext_resource type="PackedScene" uid="uid://ds2ek4nstm34a" path="res://scenes/player.tscn" id="3_tipki"]
[ext_resource type="PackedScene" uid="uid://kupegkdflsfm" path="res://art/table/table_long_tablecloth.gltf" id="4_85g3d"]
[ext_resource type="FontFile" uid="uid://cyxhh7ddkn62q" path="res://fonts/Montserrat-Medium.ttf" id="5_choun"]
[ext_resource type="Script" uid="uid://bwe2035kineoc" path="res://scripts/score_label.gd" id="6_ya4ey"]
[ext_resource type="PackedScene" uid="uid://dm5ux2nr1oc6f" path="res://art/Astolfo/scene.gltf" id="7_o6xl0"]
[ext_resource type="PackedScene" uid="uid://dyvnherbkkbbt" path="res://art/item/Plate.glb" id="8_tipki"]
[ext_resource type="PackedScene" uid="uid://bt2gjx76lcfm" path="res://art/item/Salad Bowl.glb" id="9_choun"]
[ext_resource type="PackedScene" uid="uid://b5821oyo7vl5a" path="res://art/item/Plate With Food.glb" id="10_ya4ey"]

[sub_resource type="ConvexPolygonShape3D" id="ConvexPolygonShape3D_7mycd"]
points = PackedVector3Array(1, 0.974941, 0.659358, 0.974941, 1, 1.97494, 0.999804, 0.974941, 1.97494, 0.899961, 8.19564e-08, 1.87471, 1, 0.974941, -1.97533, -0.975137, 1, 1.97494, 0.974941, 0.974941, 1.99961, 0.974941, 1, -1.97533, 0.974941, 0.799922, 1.97494, 0.874902, 8.19564e-08, 1.89977, 0.899961, 8.19564e-08, -1.8751, 0.974941, 0.799922, -1.97533, 0.974941, 0.974941, -2, -1, 0.974941, 1.97494, -0.975137, 0.974941, 1.99961, -0.975137, 1, -1.97533, 0.5, 0.499902, 1.99961, -0.875098, 8.19564e-08, 1.89977, 0.406813, 0.466229, 1.99961, 0.148982, 0.431382, 1.99961, 0.874902, 8.19564e-08, -1.90016, 0.499804, 0.499902, -2, -0.975137, 0.974941, -2, -0.900157, 8.19564e-08, 1.87471, -0.975137, 0.799922, 1.97494, -1, 0.974941, -1.97533, -0.5, 0.499902, 1.99961, -1.19209e-07, 0.431382, 1.99961, -0.407009, 0.456245, 1.99961, -0.875098, 8.19564e-08, -1.90016, -0.00019592, 0.431382, -2, 0.406813, 0.456245, -2, -0.500196, 0.499902, -2, -0.975137, 0.799922, -1.97533, -0.900157, 8.19564e-08, -1.8751, -0.407009, 0.466229, -2, -0.149178, 0.431382, -2)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_ig7tw"]
albedo_color = Color(0.968627, 0.545098, 0, 1)

[sub_resource type="CylinderMesh" id="CylinderMesh_ig7tw"]
material = SubResource("StandardMaterial3D_ig7tw")

[sub_resource type="Curve3D" id="Curve3D_lquwl"]
closed = true
_data = {
"points": PackedVector3Array(0, 0, 0, 0, 0, 0, -22.6502, -0.6, 16.2961, 0, 0, 0, 0, 0, 0, -23.4173, 0.4, -19.3838, 0, 0, 0, 0, 0, 0, 24.3484, 0.2, -19.8168, 0, 0, 0, 0, 0, 0, 22.4155, -0.4, 16.1631),
"tilts": PackedFloat32Array(0, 0, 0, 0)
}
point_count = 4

[sub_resource type="Theme" id="Theme_272bh"]
default_font = ExtResource("5_choun")
default_font_size = 22

[sub_resource type="BoxShape3D" id="BoxShape3D_tefeu"]
size = Vector3(1, 5, 40)

[sub_resource type="ConvexPolygonShape3D" id="ConvexPolygonShape3D_choun"]
points = PackedVector3Array(-0.0213459, -0.0176711, -0.501744, -0.0213459, -0.297637, -0.288878, -0.174964, -0.297637, -0.24775, -0.281346, -0.0176711, -0.432112, -0.0213459, 0.012336, -0.501744, 0.238654, -0.0176711, -0.432112, 0.13217, -0.297637, -0.24775, -0.287352, -0.297637, -0.135362, -0.471714, -0.0176711, -0.241846, -0.281346, 0.012336, -0.432112, -0.0972895, 0.0816095, -0.378463, 0.0408546, 0.084653, -0.353522, 0.238654, 0.012336, -0.432112, 0.428921, -0.0176711, -0.241744, 0.244559, -0.297637, -0.135362, -0.32848, -0.297637, 0.0181543, -0.541346, -0.0176711, 0.0181543, -0.541346, 0.012336, 0.0181543, -0.471714, 0.012336, -0.241744, -0.320743, 0.140295, -0.126912, -0.086804, 0.0883825, -0.35454, 0.0661013, 0.0979847, -0.268416, 0.35878, 0.0674632, -0.107061, 0.428921, 0.012336, -0.241744, 0.498654, -0.0176711, 0.0182561, 0.285686, -0.297637, 0.0182561, -0.287352, -0.297637, 0.171772, -0.471714, -0.0176711, 0.278154, -0.471714, 0.012336, 0.278154, -0.348331, 0.0931836, 0.168209, -0.0841572, 0.13185, -0.00933197, 0.291184, 0.0933979, -0.0540227, 0.498553, 0.012336, 0.0182561, 0.428921, 0.012336, 0.278256, 0.428921, -0.0176711, 0.278256, 0.244559, -0.297637, 0.171772, -0.281448, -0.0176711, 0.468522, -0.174964, -0.297637, 0.284161, -0.281448, 0.012336, 0.468522, -0.0765221, 0.0722215, 0.367638, 0.0919588, 0.107201, 0.193354, 0.161591, 0.0651056, 0.397465, 0.230714, 0.0558034, 0.340966, 0.238552, 0.012336, 0.468522, 0.238552, -0.0176711, 0.468522, 0.13217, -0.297637, 0.284161, -0.0214477, -0.0176711, 0.538256, -0.0213459, -0.297637, 0.325288, -0.0214477, 0.012336, 0.538256)

[sub_resource type="ConvexPolygonShape3D" id="ConvexPolygonShape3D_ya4ey"]
points = PackedVector3Array(-0.109028, 0.0925879, -0.153376, -0.108865, 0.0908213, -0.15326, -0.151094, 0.0913181, -0.118165, -0.151187, 0.0931032, -0.118234, -0.120367, 0.172528, -0.122581, -0.0466873, 0.205928, -0.115136, -0.0429543, 0.177239, -0.123043, -0.0400846, 0.100538, -0.128638, -0.0400379, 0.0987527, -0.128684, -0.117661, 0.0434351, -0.11472, -0.0447975, 0.0751792, -0.12739, -0.0482971, 0.0457538, -0.117055, -0.150651, 0.045901, -0.0658686, -0.165839, 0.0707442, -0.069036, -0.177132, 0.0928455, -0.0703538, -0.177202, 0.094649, -0.0703538, -0.173935, 0.171663, -0.0659149, -0.116634, 0.20337, -0.10864, -0.164113, 0.202561, -0.0618227, -0.0564164, 0.218111, -0.0882714, -0.0204864, 0.219601, -0.057245, 0.00480457, 0.207566, -0.0679494, 0.0159335, 0.177294, -0.0717641, 0.0463807, 0.0961948, -0.0619152, 0.046404, 0.0944281, -0.0621001, -0.0576296, 0.0329641, -0.0913232, -0.105482, 0.0329273, -0.0896586, -0.129513, 0.0344731, -0.0553724, 0.00352135, 0.043343, -0.0696371, -0.162596, 0.0415396, 0.0065186, -0.191947, 0.09671, 0.0263783, -0.191854, 0.0984951, 0.0262627, -0.170902, 0.172804, 0.0129921, -0.138612, 0.216142, -0.0504248, -0.105552, 0.216712, -0.0810119, -0.161337, 0.203554, 0.00760521, -0.0185032, 0.220319, -0.00855534, 0.00783762, 0.208983, 0.00120111, 0.0194799, 0.180239, 0.00557069, 0.0202498, 0.154107, 0.00591749, 0.0206464, 0.0944281, 0.00342058, 0.0206231, 0.0926431, 0.00339746, 0.0169601, 0.0689408, 0.00448407, 0.00620444, 0.043343, 0.000507519, -0.021653, 0.0327433, -0.0580542, -0.136862, 0.03232, -0.00490245, -0.102005, 0.0328353, 0.0287133, -0.111548, 0.0443736, 0.0546997, -0.115374, 0.0715907, 0.0654734, -0.115304, 0.0947226, 0.0654965, -0.111805, 0.148329, 0.065982, -0.111548, 0.174736, 0.0627684, -0.136466, 0.216767, -0.00439382, -0.107628, 0.204916, 0.0492897, -0.099159, 0.217779, 0.0251992, -0.0516101, 0.21973, 0.0269794, -0.0397579, 0.207805, 0.0525496, -0.0341118, 0.177607, 0.0635545, -0.0147703, 0.0953114, 0.0827668, -0.0147936, 0.093508, 0.082813, -0.042231, 0.0439687, 0.0542373, -0.0533133, 0.0329641, 0.0276036, -0.0197865, 0.0327433, -0.0091102)

[node name="Main" type="Node"]
script = ExtResource("1_tefeu")
mob_scene = ExtResource("2_o6xl0")

[node name="Player" parent="." instance=ExtResource("3_tipki")]
transform = Transform3D(-2.18557e-07, -5, 0, 5, -2.18557e-07, 0, 0, 0, 5, 0, 0, 0)

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1.19249e-08, 1, 0, -1, 1.19249e-08, 0, 29.8, 0)
light_energy = 0.8
light_bake_mode = 1
shadow_enabled = true
directional_shadow_mode = 0

[node name="StaticBody3D" type="StaticBody3D" parent="."]
transform = Transform3D(15, 0, 0, 0, 15, 0, 0, 0, 15, 0, -15, 0)
collision_layer = 4
collision_mask = 0

[node name="table_long_tablecloth2" parent="StaticBody3D" instance=ExtResource("4_85g3d")]

[node name="CollisionShape3D2" type="CollisionShape3D" parent="StaticBody3D"]
shape = SubResource("ConvexPolygonShape3D_7mycd")

[node name="Marker3D" type="Marker3D" parent="."]

[node name="Camera3D" type="Camera3D" parent="Marker3D"]
transform = Transform3D(1, 0, 0, 0, 0.707107, 0.707107, 0, -0.707107, 0.707107, 0, 20, 19)
projection = 1
size = 23.0

[node name="Cylinders" type="Node3D" parent="."]

[node name="MeshInstance3D" type="MeshInstance3D" parent="Cylinders"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -22.3, 1, -17.6)
mesh = SubResource("CylinderMesh_ig7tw")

[node name="MeshInstance3D2" type="MeshInstance3D" parent="Cylinders"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -21.8, -0.3, 16.5)
mesh = SubResource("CylinderMesh_ig7tw")

[node name="MeshInstance3D3" type="MeshInstance3D" parent="Cylinders"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 21.4, -0.3, 16.5)
mesh = SubResource("CylinderMesh_ig7tw")

[node name="MeshInstance3D4" type="MeshInstance3D" parent="Cylinders"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 22.6, 1.6, -18)
mesh = SubResource("CylinderMesh_ig7tw")

[node name="SpawnPath" type="Path3D" parent="."]
curve = SubResource("Curve3D_lquwl")

[node name="SpawnLocation" type="PathFollow3D" parent="SpawnPath"]
transform = Transform3D(0.999757, 0.000602049, 0.0214861, -8.73105e-11, 0.999605, -0.0280095, -0.0214943, 0.028003, 0.999377, -22.6502, -0.6, 16.2961)

[node name="MobTimer" type="Timer" parent="."]
wait_time = 0.5
autostart = true

[node name="UserInterface" type="Control" parent="."]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="ScoreLabel" type="Label" parent="UserInterface"]
layout_mode = 1
offset_left = 12.0
offset_top = 12.0
offset_right = 106.0
offset_bottom = 40.0
theme = SubResource("Theme_272bh")
theme_override_colors/font_color = Color(0, 0, 0, 1)
text = "Score : 0"
script = ExtResource("6_ya4ey")

[node name="Retry" type="ColorRect" parent="UserInterface"]
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -95.0
offset_top = -20.0
offset_right = 95.0
offset_bottom = 20.0
grow_horizontal = 2
grow_vertical = 2
color = Color(0, 0, 0, 1)

[node name="Label" type="Label" parent="UserInterface/Retry"]
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -20.0
offset_top = -11.5
offset_right = 20.0
offset_bottom = 11.5
grow_horizontal = 2
grow_vertical = 2
text = "Press Enter to retry"

[node name="Exit" type="ColorRect" parent="UserInterface"]
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -97.0
offset_top = 36.0
offset_right = 93.0
offset_bottom = 76.0
grow_horizontal = 2
grow_vertical = 2
color = Color(0, 0, 0, 1)

[node name="Label" type="Label" parent="UserInterface/Exit"]
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -20.0
offset_top = -11.5
offset_right = 20.0
offset_bottom = 11.5
grow_horizontal = 2
grow_vertical = 2
text = "Press Esc to exit"

[node name="Wall" type="Node3D" parent="."]

[node name="wall1" type="StaticBody3D" parent="Wall"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -15, 0, 0)
collision_layer = 4

[node name="CollisionShape3D" type="CollisionShape3D" parent="Wall/wall1"]
shape = SubResource("BoxShape3D_tefeu")

[node name="wall2" type="StaticBody3D" parent="Wall"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 15, 0, 0)
collision_layer = 4

[node name="CollisionShape3D" type="CollisionShape3D" parent="Wall/wall2"]
shape = SubResource("BoxShape3D_tefeu")

[node name="wall3" type="StaticBody3D" parent="Wall"]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, 0, 0, -15)
collision_layer = 4

[node name="CollisionShape3D" type="CollisionShape3D" parent="Wall/wall3"]
shape = SubResource("BoxShape3D_tefeu")

[node name="wall4" type="StaticBody3D" parent="Wall"]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, 0, 0, 15)
collision_layer = 4

[node name="CollisionShape3D" type="CollisionShape3D" parent="Wall/wall4"]
shape = SubResource("BoxShape3D_tefeu")

[node name="Astolfo" parent="." instance=ExtResource("7_o6xl0")]
transform = Transform3D(0.1, 0, 0, 0, 0.1, 0, 0, 0, 0.1, 4.9, 0, -9)
visible = false

[node name="item" type="Node3D" parent="."]

[node name="Plate2" parent="item" instance=ExtResource("8_tipki")]
transform = Transform3D(0.1, 0, 0, 0, 0.1, 0, 0, 0, 0.1, 10.3, 0.1, -10.5)

[node name="Plate3" parent="item" instance=ExtResource("8_tipki")]
transform = Transform3D(0.1, 0, 0, 0, 0.1, 0, 0, 0, 0.1, -11.6, 0, 10.6)

[node name="Salad Bowl" parent="item" instance=ExtResource("9_choun")]
transform = Transform3D(7, 0, 0, 0, 7, 0, 0, 0, 7, -10.8, 2.1, -10.2)

[node name="StaticBody3D" type="StaticBody3D" parent="item/Salad Bowl"]
collision_layer = 4
collision_mask = 5

[node name="CollisionShape3D" type="CollisionShape3D" parent="item/Salad Bowl/StaticBody3D"]
shape = SubResource("ConvexPolygonShape3D_choun")

[node name="Plate With Food" parent="item" instance=ExtResource("10_ya4ey")]
transform = Transform3D(15, 0, 0, 0, 15, 0, 0, 0, 15, 9.9, -0.4, 9.7)

[node name="StaticBody3D" type="StaticBody3D" parent="item/Plate With Food"]
collision_layer = 4
collision_mask = 5

[node name="CollisionShape3D2" type="CollisionShape3D" parent="item/Plate With Food/StaticBody3D"]
shape = SubResource("ConvexPolygonShape3D_ya4ey")

[connection signal="hit" from="Player" to="." method="_on_player_hit"]
[connection signal="timeout" from="MobTimer" to="." method="_on_mob_timer_timeout"]
